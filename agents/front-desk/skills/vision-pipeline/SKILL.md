---
name: hotel-vision-pipeline
description: 视觉管道：通过摄像头检测来宾、人脸识别、主动问候。在无摄像头环境下此技能可跳过。
---

# 📷 视觉管道 (Vision Pipeline)

## 触发条件

当系统检测到摄像头画面中有人体出现时自动激活，或用户提到：查看监控、谁在前台、检测来宾、拍照、看看门口。

## 核心能力

本技能通过 macOS 摄像头提供：
1. **实时视频流** — 获取当前大厅画面
2. **人体检测** — 检测前台区域是否有客人
3. **人脸识别** — 与已注册客人比对（需配合身份数据库）
4. **主动问候** — 识别到新来宾时自动打招呼
5. **异常监控** — 长时间无人活动时的警报

## 操作指令

### 手动触发

| 指令示例 | 说明 |
|----------|------|
| `/camera snap` | 立即拍一张照片 |
| `/camera snap --facing back` | 用后置摄像头拍照 |
| `/camera clip --duration 5` | 录制 5 秒短视频 |
| `/camera list` | 列出可用摄像头设备 |

### 自动触发场景

- 用户问"门口有人吗？" → 自动调用摄像头检查
- 用户说"帮我看看大堂" → 获取大厅实时画面
- 系统心跳检测 → 每 5 分钟检查一次大厅状态

## 工作流程（有摄像头时）

1. 持续监测摄像头画面（可配置间隔）
2. 检测到人体 → 尝试人脸匹配
3. 已注册客人 → "欢迎回来，[姓名] 先生/女士！今天入住还是退房？"
4. 陌生来宾 → "您好，欢迎光临！请问有什么可以帮您？"
5. 30 分钟内不重复问候同一个人

## 配置说明

在 `openclaw.json` 中确保：
```json
{
  "tools": {
    "camera": {
      "enabled": true,
      "device": "default",
      "resolution": "1920x1080"
    }
  }
}
```

## 本地测试提示

> ⚠️ 在没有外接摄像头或不需要视觉功能的本地测试环境中，此技能的视觉检测功能不会主动触发。客人可以直接通过文字对话触发入住、退房等其他技能。

如需模拟测试，可以用文字命令代替：
- 说"模拟摄像头画面，有一个戴帽子的男士在大厅"
- Agent 会假装看到并给出相应响应
