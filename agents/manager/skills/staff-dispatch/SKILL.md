---
name: hotel-staff-dispatch
description: 人员调度：快速派单、分配任务、查看状态、部门通知。触发词：派单、调度、分配、通知、任务。
---

# 📋 人员调度 (Staff Dispatch)

## 触发条件

当用户提到：派单、分配、调度、通知、任务、派人去、安排、谁去处理、工单。

## 工作流程

展示操作菜单：

```
📋 人员调度

1️⃣ 🆕 创建新工单 / 快速派单
2️⃣ 👤 指定人员分配任务
3️⃣ 📊 查看任务状态
4️⃣ 📢 部门群发通知
5️⃣ 返回
```

### 操作 1: 创建新工单

权限要求：`staff.assign`

1. 选择部门：
   - 1️⃣ 🧹 客房部
   - 2️⃣ 🔧 工程部
   - 3️⃣ 🍽️ 餐饮部
   - 4️⃣ 🏨 前厅部
   - 5️⃣ 🛡️ 安保部

2. 输入任务标题、描述、优先级（低/普通/高/紧急）、关联房间号（可选）

3. 生成工单号（格式 `TASK-XXX`）

4. 通知相关部门员工

### 操作 2: 指定人员分配

列出待分配任务，输入 `工单号 负责人姓名` 完成分配。

### 操作 3: 查看任务状态

展示总览统计和最近任务详情：
```
📊 任务状态总览

⏳ 待处理: X
👤 已分配: X
🔄 处理中: X
✅ 已完成: X
```

### 操作 4: 部门群发通知

选择部门（或全员），输入通知内容后群发。

## 员工数据

| ID | 姓名 | 角色 | 部门 |
|----|------|------|------|
| U001 | 张老板 | 👑 老板 | 管理层 |
| U002 | 王总 | 🏢 总经理 | 管理层 |
| U003 | 李经理 | 📊 运营经理 | 管理层 |
| U004 | 赵主管 | 👥 客房部主管 | 客房部 |
| U005 | 刘工 | 👥 工程部主管 | 工程部 |
| U006 | 陈师傅 | 👤 员工 | 工程部 |
| U007 | 小张 | 👤 员工 | 客房部 |
| U008 | 小王 | 👤 员工 | 餐饮部 |
| U009 | 保安老孙 | 👤 员工 | 安保部 |

## 模拟任务数据

| 工单号 | 标题 | 部门 | 负责人 | 优先级 | 状态 | 房间 |
|--------|------|------|--------|--------|------|------|
| TASK-501 | 1203房间空调检修 | 工程部 | 陈师傅 | ⚡ 高 | 🔄 处理中 | 1203 |
| TASK-502 | 15楼走廊灯维修 | 工程部 | 待分配 | 普通 | ⏳ 待处理 | |

## 部门代码对照

| 代码 | 中文名 |
|------|--------|
| housekeeping | 客房部 |
| engineering | 工程部 |
| food_beverage | 餐饮部 |
| front_office | 前厅部 |
| security | 安保部 |
| management | 管理层 |

## 权限规则

| 角色 | 分配任务 | 查看全部 | 查看自己 |
|------|---------|---------|---------|
| 老板 | ✅ | ✅ | ✅ |
| 总经理 | ✅ | ✅ | ✅ |
| 运营经理 | ✅ | ✅ | ✅ |
| 部门主管 | ✅ (本部门) | ✅ | ✅ |
| 普通员工 | ❌ | ❌ | ✅ (仅自己) |

## 注意事项

- 创建工单后自动通知该部门所有成员
- 分配指定人员后发送钉钉通知（模拟模式下仅提示"已发送"）
- 默认用户为 U001（张老板），拥有全部权限
